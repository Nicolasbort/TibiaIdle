{"remainingRequest":"/home/iago/Documentos/Tibidle/TibiaIdle/client/node_modules/babel-loader/lib/index.js!/home/iago/Documentos/Tibidle/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/iago/Documentos/Tibidle/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/iago/Documentos/Tibidle/TibiaIdle/client/src/components/ComponentCanvas.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/iago/Documentos/Tibidle/TibiaIdle/client/src/components/ComponentCanvas.vue","mtime":1616647451866},{"path":"/home/iago/Documentos/Tibidle/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616639965533},{"path":"/home/iago/Documentos/Tibidle/TibiaIdle/client/node_modules/babel-loader/lib/index.js","mtime":1616639965457},{"path":"/home/iago/Documentos/Tibidle/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616639965533},{"path":"/home/iago/Documentos/Tibidle/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js","mtime":1616639967461}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL2lhZ28vRG9jdW1lbnRvcy9UaWJpZGxlL1RpYmlhSWRsZS9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCBpbyBmcm9tICJzb2NrZXQuaW8tY2xpZW50IjsKaW1wb3J0IHsgRW50aXR5LCBFbnRpdHlMaXN0RGljdCB9IGZyb20gIi4uL3NjcmlwdHMvRW50aXR5LmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb21wb25lbnRDYW52YXMnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzb2NrZXQ6IHt9LAogICAgICBjb250ZXh0OiB7fSwKICAgICAgZ2FtZVdvcmxkOiB7fSwKICAgICAgcGxheWVyTGlzdDogW10sCiAgICAgIHBsYXllclNwcml0ZXM6IFtyZXF1aXJlKCcuLi9hc3NldHMvcHJpZXN0MS92MS9wcmllc3QxX3YxXzEucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9wcmllc3QyL3YxL3ByaWVzdDJfdjFfMS5wbmcnKSwgcmVxdWlyZSgnLi4vYXNzZXRzL3ByaWVzdDMvdjEvcHJpZXN0M192MV8xLnBuZycpXSwKICAgICAgYmFja2dyb3VuZDogbmV3IEltYWdlKCkKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zb2NrZXQgPSBpbygiaHR0cDovL2xvY2FsaG9zdDozMDAwIiwgewogICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCddCiAgICB9KTsKICAgIHRoaXMuYmFja2dyb3VuZC5zcmMgPSByZXF1aXJlKCIuLi9hc3NldHMvbWFwLmpwZWciKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLiRyZWZzLmRvbUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgdmFyIHRoYXQgPSB0aGlzOwogICAgdGhpcy5zb2NrZXQub24oInNlcnZlclVwZGF0ZVBsYXllckxpc3QiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICB0aGF0LnBsYXllckxpc3QgPSBkYXRhLnBsYXllckxpc3Q7CiAgICAgIHRoYXQucmVuZGVyKCk7CiAgICB9KTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBrZXlwcmVzc2VkID0gZS5rZXk7CiAgICAgIHRoYXQuc29ja2V0LmVtaXQoJ2NsaWVudEtleVByZXNzZWQnLCBrZXlwcmVzc2VkKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIC8vIE7Do28gc2VpIHByYSBxdWUgc2VydmUgbWFzIHRlbSBxdWUgdXNhcgogICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpOyAvLyBBdHVhbGl6YSBhIHBvc2ljYW8gZGEgY2FtZXJhIGRvIHBsYXllcgoKICAgICAgdmFyIHBsYXllckNhbSA9IHRoaXMucGxheWVyTGlzdFt0aGlzLnNvY2tldC5pZF0uY2FtOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnNvY2tldC5pZCArICIgLSAiICsgdGhpcy5wbGF5ZXJMaXN0W3RoaXMuc29ja2V0LmlkXSk7CiAgICAgIHRoaXMuY29udGV4dC50cmFuc2xhdGUoLXBsYXllckNhbS54LCAtcGxheWVyQ2FtLnkpOyAvLyBEZXNlbmhhIG8gYmFja2dyb3VuZCBhbnRlcyBwcmEgZmljYXIgYXRyYXMgZG9zIHBsYXllcnMKCiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5iYWNrZ3JvdW5kLCAwLCAwKTsKICAgICAgdmFyIHNwcml0ZV9jaGFyID0gbmV3IEltYWdlKCk7CiAgICAgIGNvbnNvbGUubG9nKE9iamVjdC5lbnRyaWVzKHRoaXMucGxheWVyTGlzdCkubGVuZ3RoKTsKCiAgICAgIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5wbGF5ZXJMaXN0KTsgX2kgPCBfT2JqZWN0JGVudHJpZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIF9PYmplY3QkZW50cmllcyRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllc1tfaV0sIDIpLAogICAgICAgICAgICBrZXkgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sCiAgICAgICAgICAgIHZhbHVlID0gX09iamVjdCRlbnRyaWVzJF9pWzFdOwoKICAgICAgICBzcHJpdGVfY2hhci5zcmMgPSB0aGlzLnBsYXllclNwcml0ZXNbdmFsdWUuc3ByaXRlXTsKICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHNwcml0ZV9jaGFyLCAwLCAwLCAxNiwgMTYsIHZhbHVlLngsIHZhbHVlLnksIDE2LCAxNik7CiAgICAgIH0gLy8gTsOjbyBzZWkgcHJhIHF1ZSBzZXJ2ZSBtYXMgdGVtIHF1ZSB1c2FyCgoKICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/iago/Documentos/Tibidle/TibiaIdle/client/src/components/ComponentCanvas.vue"],"names":[],"mappings":";;AAOI,OAAO,EAAP,MAAe,kBAAf;AACA,SAAQ,MAAR,EAAgB,cAAhB,QAAqC,sBAArC;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,iBADK;AAEX,EAAA,IAFW,kBAEJ;AACH,WAAO;AACH,MAAA,MAAM,EAAE,EADL;AAEH,MAAA,OAAO,EAAE,EAFN;AAGH,MAAA,SAAS,EAAE,EAHR;AAKH,MAAA,UAAU,EAAE,EALT;AAMH,MAAA,aAAa,EAAE,CACX,OAAO,CAAC,uCAAD,CADI,EAEX,OAAO,CAAC,uCAAD,CAFI,EAGX,OAAO,CAAC,uCAAD,CAHI,CANZ;AAWH,MAAA,UAAU,EAAE,IAAI,KAAJ;AAXT,KAAP;AAaH,GAhBU;AAiBX,EAAA,OAjBW,qBAiBD;AACN,SAAK,MAAL,GAAc,EAAE,CAAC,uBAAD,EAA0B;AAAC,MAAA,UAAU,EAAC,CAAC,WAAD;AAAZ,KAA1B,CAAhB;AACA,SAAK,UAAL,CAAgB,GAAhB,GAAsB,OAAO,CAAC,oBAAD,CAA7B;AACH,GApBU;AAqBX,EAAA,OArBW,qBAqBD;AACN,SAAK,OAAL,GAAe,KAAK,KAAL,CAAW,SAAX,CAAqB,UAArB,CAAgC,IAAhC,CAAf;AAEA,QAAI,IAAG,GAAI,IAAX;AACA,SAAK,MAAL,CAAY,EAAZ,CAAe,wBAAf,EAAyC,UAAA,IAAG,EAAK;AAC7C,MAAA,IAAI,CAAC,UAAL,GAAkB,IAAI,CAAC,UAAvB;AACA,MAAA,IAAI,CAAC,MAAL;AACH,KAHD;AAKA,IAAA,MAAM,CAAC,gBAAP,CAAwB,UAAxB,EAAoC,UAAS,CAAT,EAAW;AAC3C,UAAI,UAAS,GAAI,CAAC,CAAC,GAAnB;AACA,MAAA,IAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,kBAAjB,EAAqC,UAArC;AACH,KAHD;AAIH,GAlCU;AAmCX,EAAA,OAAO,EAAE;AACL,IAAA,MADK,oBACG;AACJ;AACA,WAAK,OAAL,CAAa,IAAb,GAFI,CAIJ;;AACA,UAAI,SAAQ,GAAI,KAAK,UAAL,CAAgB,KAAK,MAAL,CAAY,EAA5B,EAAgC,GAAhD;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,MAAL,CAAY,EAAZ,GAAiB,KAAjB,GAAyB,KAAK,UAAL,CAAgB,KAAK,MAAL,CAAY,EAA5B,CAArC;AACA,WAAK,OAAL,CAAa,SAAb,CAAuB,CAAC,SAAS,CAAC,CAAlC,EAAqC,CAAC,SAAS,CAAC,CAAhD,EAPI,CASJ;;AACA,WAAK,OAAL,CAAa,SAAb,CAAuB,KAAK,UAA5B,EAAwC,CAAxC,EAA2C,CAA3C;AAEA,UAAI,WAAU,GAAI,IAAI,KAAJ,EAAlB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,OAAP,CAAe,KAAK,UAApB,EAAgC,MAA5C;;AACA,yCAA2B,MAAM,CAAC,OAAP,CAAe,KAAK,UAApB,CAA3B,qCAA2D;AAAA;AAAA,YAA/C,GAA+C;AAAA,YAA1C,KAA0C;;AACvD,QAAA,WAAW,CAAC,GAAZ,GAAkB,KAAK,aAAL,CAAmB,KAAK,CAAC,MAAzB,CAAlB;AACA,aAAK,OAAL,CAAa,SAAb,CAAuB,WAAvB,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,EAA1C,EAA8C,EAA9C,EAAkD,KAAK,CAAC,CAAxD,EAA2D,KAAK,CAAC,CAAjE,EAAoE,EAApE,EAAwE,EAAxE;AACJ,OAjBI,CAmBJ;;;AACA,WAAK,OAAL,CAAa,OAAb;AACJ;AAtBK;AAnCE,CAAf","sourcesContent":["<template>\n    <canvas ref=\"domCanvas\" width=\"320\" height=\"320\" style=\"transform:scale(2);margin-top:150px;image-rendering: pixelated;\">\n        Canvas not supported\n    </canvas>\n</template>\n\n<script>\n    import io from \"socket.io-client\"\n    import {Entity, EntityListDict} from \"../scripts/Entity.js\"\n\n    export default {\n        name: 'ComponentCanvas',\n        data (){\n            return {\n                socket: {},\n                context: {},\n                gameWorld: {},\n\n                playerList: [],\n                playerSprites: [\n                    require('../assets/priest1/v1/priest1_v1_1.png'),\n                    require('../assets/priest2/v1/priest2_v1_1.png'),\n                    require('../assets/priest3/v1/priest3_v1_1.png'),\n                ],\n                background: new Image()\n            }\n        },\n        created() {\n            this.socket = io(\"http://localhost:3000\", {transports:['websocket']});\n            this.background.src = require(\"../assets/map.jpeg\");\n        },\n        mounted() {\n            this.context = this.$refs.domCanvas.getContext('2d');\n\n            var that = this;\n            this.socket.on(\"serverUpdatePlayerList\", data => {\n                that.playerList = data.playerList;\n                that.render();\n            });\n\n            window.addEventListener('keypress', function(e){\n                var keypressed = e.key;\n                that.socket.emit('clientKeyPressed', keypressed);\n            });\n        },\n        methods: {\n            render(){\n                // Não sei pra que serve mas tem que usar\n                this.context.save();\n\n                // Atualiza a posicao da camera do player\n                var playerCam = this.playerList[this.socket.id].cam;\n                console.log(this.socket.id + \" - \" + this.playerList[this.socket.id]);\n                this.context.translate(-playerCam.x, -playerCam.y);\n\n                // Desenha o background antes pra ficar atras dos players\n                this.context.drawImage(this.background, 0, 0);   \n\n                var sprite_char = new Image();\n                console.log(Object.entries(this.playerList).length);\n                for( const [key, value] of Object.entries(this.playerList)){\n                    sprite_char.src = this.playerSprites[value.sprite];\n                    this.context.drawImage(sprite_char, 0, 0, 16, 16, value.x, value.y, 16, 16);   \n                }\n\n                // Não sei pra que serve mas tem que usar\n                this.context.restore();\n            }\n        }\n\n    }\n</script>\n\n<style scoped></style>\n"],"sourceRoot":""}]}