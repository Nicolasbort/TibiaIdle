{"remainingRequest":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js!/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue","mtime":1616731333743},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616706506688},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js","mtime":1616706506660},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616706506688},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js","mtime":1616706507556}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL25pY29sYXMvRGVza3RvcC9UaWJpYUlkbGUvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgaW8gZnJvbSAic29ja2V0LmlvLWNsaWVudCI7CmltcG9ydCB7IEVudGl0eSwgRW50aXR5TGlzdERpY3QgfSBmcm9tICIuLi9zY3JpcHRzL0VudGl0eS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29tcG9uZW50Q2FudmFzJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc29ja2V0OiB7fSwKICAgICAgY29udGV4dDoge30sCiAgICAgIHBsYXllckxpc3Q6IFtdLAogICAgICBwbGF5ZXJTcHJpdGVzOiBbcmVxdWlyZSgnLi4vYXNzZXRzL3ByaWVzdDEvdjEvcHJpZXN0MV92MV8xLnBuZycpLCByZXF1aXJlKCcuLi9hc3NldHMvcHJpZXN0Mi92MS9wcmllc3QyX3YxXzEucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9wcmllc3QzL3YxL3ByaWVzdDNfdjFfMS5wbmcnKV0sCiAgICAgIGVuZW15U3ByaXRlczogW3JlcXVpcmUoJy4uL2Fzc2V0cy9za2VsZXRvbi92MS9za2VsZXRvbjJfdjFfMS5wbmcnKSwgcmVxdWlyZSgnLi4vYXNzZXRzL3NrZWxldG9uL3YxL3NrZWxldG9uMl92MV8yLnBuZycpLCByZXF1aXJlKCcuLi9hc3NldHMvc2tlbGV0b24vdjEvc2tlbGV0b24yX3YxXzMucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9za2VsZXRvbi92MS9za2VsZXRvbjJfdjFfNC5wbmcnKV0sCiAgICAgIGJhY2tncm91bmQ6IG5ldyBJbWFnZSgpLAogICAgICBzcHJpdGVfY2hhcjogbmV3IEltYWdlKCksCiAgICAgIHNwcml0ZV9lbmVteTogbmV3IEltYWdlKCkKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zb2NrZXQgPSBpbygiaHR0cDovL2xvY2FsaG9zdDozMDAwIiwgewogICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCddCiAgICB9KTsKICAgIHRoaXMuYmFja2dyb3VuZC5zcmMgPSByZXF1aXJlKCIuLi9hc3NldHMvbWFwLmpwZWciKTsKICAgIHRoaXMuc3ByaXRlX2NoYXIuY2xhc3NOYW1lICs9ICJjaGFyXyI7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5jYW52YXMgPSB0aGlzLiRyZWZzLmRvbUNhbnZhczsKICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICB0aGlzLnNvY2tldC5vbigic2VydmVyVXBkYXRlIiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgaWYgKCJwbGF5ZXJMaXN0IiBpbiBkYXRhKSB7CiAgICAgICAgdGhhdC5wbGF5ZXJMaXN0ID0gZGF0YS5wbGF5ZXJMaXN0OwogICAgICB9CgogICAgICBpZiAoImVuZW15TGlzdCIgaW4gZGF0YSkgewogICAgICAgIHRoYXQuZW5lbXlMaXN0ID0gZGF0YS5lbmVteUxpc3Q7CiAgICAgIH0gLy8gY29uc29sZS5sb2coZGF0YSk7CgoKICAgICAgdGhhdC5yZW5kZXIoKTsKICAgIH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5sb2codGhhdC5lbmVteUxpc3QpOwogICAgICB2YXIga2V5cHJlc3NlZCA9IGUua2V5OwogICAgICB0aGF0LnNvY2tldC5lbWl0KCdjbGllbnRLZXlQcmVzc2VkJywga2V5cHJlc3NlZCk7CiAgICB9KTsKICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5sb2coIkNsaWNrIik7CiAgICAgIHZhciBjYW52YXNSZWN0ID0gdGhhdC5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIHZhciBwb3NpdGlvbiA9IHsKICAgICAgICB4OiBlLmNsaWVudFggLSBjYW52YXNSZWN0LmxlZnQsCiAgICAgICAgeTogZS5jbGllbnRZIC0gY2FudmFzUmVjdC50b3AKICAgICAgfTsKICAgICAgdGhhdC5zb2NrZXQuZW1pdCgnY2xpZW50TW91c2VDbGlja2VkJywgcG9zaXRpb24pOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgLy8gTsOjbyBzZWkgcHJhIHF1ZSBzZXJ2ZSBtYXMgdGVtIHF1ZSB1c2FyCiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7IC8vIEF0dWFsaXphIGEgcG9zaWNhbyBkYSBjYW1lcmEgZG8gcGxheWVyCgogICAgICB2YXIgcGxheWVyQ2FtID0gdGhpcy5wbGF5ZXJMaXN0W3RoaXMuc29ja2V0LmlkXS5jYW07CiAgICAgIHRoaXMuY29udGV4dC50cmFuc2xhdGUoLXBsYXllckNhbS54LCAtcGxheWVyQ2FtLnkpOyAvLyBEZXNlbmhhIG8gYmFja2dyb3VuZCBhbnRlcyBwcmEgZmljYXIgYXRyYXMgZG9zIHBsYXllcnMKCiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5iYWNrZ3JvdW5kLCAwLCAwKTsKCiAgICAgIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5wbGF5ZXJMaXN0KTsgX2kgPCBfT2JqZWN0JGVudHJpZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIF9PYmplY3QkZW50cmllcyRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllc1tfaV0sIDIpLAogICAgICAgICAgICBrZXkgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sCiAgICAgICAgICAgIHZhbHVlID0gX09iamVjdCRlbnRyaWVzJF9pWzFdOwoKICAgICAgICB0aGlzLnNwcml0ZV9jaGFyLnNyYyA9IHRoaXMucGxheWVyU3ByaXRlc1t2YWx1ZS5zcHJpdGVdOwogICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5zcHJpdGVfY2hhciwgMCwgMCwgMTYsIDE2LCB2YWx1ZS5wb3NpdGlvbi54LCB2YWx1ZS5wb3NpdGlvbi55LCAxNiwgMTYpOwogICAgICB9CgogICAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGVudHJpZXMyID0gT2JqZWN0LmVudHJpZXModGhpcy5lbmVteUxpc3QpOyBfaTIgPCBfT2JqZWN0JGVudHJpZXMyLmxlbmd0aDsgX2kyKyspIHsKICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzMiRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllczJbX2kyXSwgMiksCiAgICAgICAgICAgIF9rZXkgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzBdLAogICAgICAgICAgICBfdmFsdWUgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzFdOwoKICAgICAgICB0aGlzLnNwcml0ZV9lbmVteS5zcmMgPSB0aGlzLmVuZW15U3ByaXRlc1tfdmFsdWUuc3ByaXRlXTsKICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuc3ByaXRlX2VuZW15LCAwLCAwLCAxNiwgMTYsIF92YWx1ZS5wb3NpdGlvbi54LCBfdmFsdWUucG9zaXRpb24ueSwgMTYsIDE2KTsKICAgICAgfSAvLyBOw6NvIHNlaSBwcmEgcXVlIHNlcnZlIG1hcyB0ZW0gcXVlIHVzYXIKCgogICAgICB0aGlzLmNvbnRleHQucmVzdG9yZSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue"],"names":[],"mappings":";;AAOI,OAAO,EAAP,MAAe,kBAAf;AACA,SAAQ,MAAR,EAAgB,cAAhB,QAAqC,sBAArC;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,iBADK;AAEX,EAAA,IAFW,kBAEJ;AACH,WAAO;AACH,MAAA,MAAM,EAAE,EADL;AAEH,MAAA,OAAO,EAAE,EAFN;AAIH,MAAA,UAAU,EAAE,EAJT;AAKH,MAAA,aAAa,EAAE,CACX,OAAO,CAAC,uCAAD,CADI,EAEX,OAAO,CAAC,uCAAD,CAFI,EAGX,OAAO,CAAC,uCAAD,CAHI,CALZ;AAUH,MAAA,YAAY,EAAE,CACV,OAAO,CAAC,0CAAD,CADG,EAEV,OAAO,CAAC,0CAAD,CAFG,EAGV,OAAO,CAAC,0CAAD,CAHG,EAIV,OAAO,CAAC,0CAAD,CAJG,CAVX;AAgBH,MAAA,UAAU,EAAE,IAAI,KAAJ,EAhBT;AAiBH,MAAA,WAAW,EAAE,IAAI,KAAJ,EAjBV;AAkBH,MAAA,YAAY,EAAE,IAAI,KAAJ;AAlBX,KAAP;AAoBH,GAvBU;AAwBX,EAAA,OAxBW,qBAwBD;AACN,SAAK,MAAL,GAAc,EAAE,CAAC,uBAAD,EAA0B;AAAC,MAAA,UAAU,EAAC,CAAC,WAAD;AAAZ,KAA1B,CAAhB;AACA,SAAK,UAAL,CAAgB,GAAhB,GAAsB,OAAO,CAAC,oBAAD,CAA7B;AACA,SAAK,WAAL,CAAiB,SAAjB,IAA8B,OAA9B;AACH,GA5BU;AA6BX,EAAA,OA7BW,qBA6BD;AACN,SAAK,MAAL,GAAc,KAAK,KAAL,CAAW,SAAzB;AACA,SAAK,OAAL,GAAe,KAAK,MAAL,CAAY,UAAZ,CAAuB,IAAvB,CAAf;AAEA,QAAI,IAAG,GAAI,IAAX;AACA,SAAK,MAAL,CAAY,EAAZ,CAAe,cAAf,EAA+B,UAAA,IAAG,EAAK;AACnC,UAAG,gBAAgB,IAAnB,EAAwB;AACpB,QAAA,IAAI,CAAC,UAAL,GAAkB,IAAI,CAAC,UAAvB;AACJ;;AACA,UAAI,eAAe,IAAnB,EAAwB;AACpB,QAAA,IAAI,CAAC,SAAL,GAAiB,IAAI,CAAC,SAAtB;AACJ,OANmC,CAOnC;;;AACA,MAAA,IAAI,CAAC,MAAL;AACH,KATD;AAWA,IAAA,MAAM,CAAC,gBAAP,CAAwB,UAAxB,EAAoC,UAAS,CAAT,EAAW;AAC3C,MAAA,OAAO,CAAC,GAAR,CAAY,IAAI,CAAC,SAAjB;AACA,UAAI,UAAS,GAAI,CAAC,CAAC,GAAnB;AACA,MAAA,IAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,kBAAjB,EAAqC,UAArC;AACH,KAJD;AAMA,SAAK,MAAL,CAAY,gBAAZ,CAA6B,OAA7B,EAAsC,UAAS,CAAT,EAAY;AAC9C,MAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;AACA,UAAM,UAAS,GAAI,IAAI,CAAC,MAAL,CAAY,qBAAZ,EAAnB;AACA,UAAM,QAAO,GAAI;AACb,QAAA,CAAC,EAAE,CAAC,CAAC,OAAF,GAAY,UAAU,CAAC,IADb;AAEb,QAAA,CAAC,EAAE,CAAC,CAAC,OAAF,GAAY,UAAU,CAAC;AAFb,OAAjB;AAIA,MAAA,IAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,oBAAjB,EAAuC,QAAvC;AACH,KARD;AAUH,GA7DU;AA8DX,EAAA,OAAO,EAAE;AACL,IAAA,MADK,oBACG;AACJ;AACA,WAAK,OAAL,CAAa,IAAb,GAFI,CAIJ;;AACA,UAAI,SAAQ,GAAI,KAAK,UAAL,CAAgB,KAAK,MAAL,CAAY,EAA5B,EAAgC,GAAhD;AACA,WAAK,OAAL,CAAa,SAAb,CAAuB,CAAC,SAAS,CAAC,CAAlC,EAAqC,CAAC,SAAS,CAAC,CAAhD,EANI,CAQJ;;AACA,WAAK,OAAL,CAAa,SAAb,CAAuB,KAAK,UAA5B,EAAwC,CAAxC,EAA2C,CAA3C;;AAGA,yCAA2B,MAAM,CAAC,OAAP,CAAe,KAAK,UAApB,CAA3B,qCAA2D;AAAA;AAAA,YAA/C,GAA+C;AAAA,YAA1C,KAA0C;;AACvD,aAAK,WAAL,CAAiB,GAAjB,GAAuB,KAAK,aAAL,CAAmB,KAAK,CAAC,MAAzB,CAAvB;AACA,aAAK,OAAL,CAAa,SAAb,CAAuB,KAAK,WAA5B,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,EAAnD,EAAuD,KAAK,CAAC,QAAN,CAAe,CAAtE,EAAyE,KAAK,CAAC,QAAN,CAAe,CAAxF,EAA2F,EAA3F,EAA+F,EAA/F;AACJ;;AAEA,2CAA2B,MAAM,CAAC,OAAP,CAAe,KAAK,SAApB,CAA3B,wCAA0D;AAAA;AAAA,YAA9C,IAA8C;AAAA,YAAzC,MAAyC;;AACtD,aAAK,YAAL,CAAkB,GAAlB,GAAwB,KAAK,YAAL,CAAkB,MAAK,CAAC,MAAxB,CAAxB;AACA,aAAK,OAAL,CAAa,SAAb,CAAuB,KAAK,YAA5B,EAA0C,CAA1C,EAA6C,CAA7C,EAAgD,EAAhD,EAAoD,EAApD,EAAwD,MAAK,CAAC,QAAN,CAAe,CAAvE,EAA0E,MAAK,CAAC,QAAN,CAAe,CAAzF,EAA4F,EAA5F,EAAgG,EAAhG;AACJ,OApBI,CAuBJ;;;AACA,WAAK,OAAL,CAAa,OAAb;AACJ;AA1BK;AA9DE,CAAf","sourcesContent":["<template>\n    <canvas ref=\"domCanvas\" width=\"320\" height=\"320\" style=\"transform:scale(2);margin-top:150px;image-rendering: pixelated;\">\n        Canvas not supported\n    </canvas>\n</template>\n\n<script>\n    import io from \"socket.io-client\"\n    import {Entity, EntityListDict} from \"../scripts/Entity.js\"\n\n    export default {\n        name: 'ComponentCanvas',\n        data (){\n            return {\n                socket: {},\n                context: {},\n\n                playerList: [],\n                playerSprites: [\n                    require('../assets/priest1/v1/priest1_v1_1.png'),\n                    require('../assets/priest2/v1/priest2_v1_1.png'),\n                    require('../assets/priest3/v1/priest3_v1_1.png'),\n                ],\n                enemySprites: [\n                    require('../assets/skeleton/v1/skeleton2_v1_1.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_2.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_3.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_4.png'),\n                ],\n                background: new Image(),                \n                sprite_char: new Image(),\n                sprite_enemy: new Image(),\n            }\n        },\n        created() {\n            this.socket = io(\"http://localhost:3000\", {transports:['websocket']});\n            this.background.src = require(\"../assets/map.jpeg\");\n            this.sprite_char.className += \"char_\"\n        },\n        mounted() {\n            this.canvas = this.$refs.domCanvas;\n            this.context = this.canvas.getContext('2d');\n\n            var that = this;\n            this.socket.on(\"serverUpdate\", data => {\n                if(\"playerList\" in data){\n                    that.playerList = data.playerList;\n                }\n                if (\"enemyList\" in data){\n                    that.enemyList = data.enemyList;\n                }\n                // console.log(data);\n                that.render();\n            });\n\n            window.addEventListener('keypress', function(e){\n                console.log(that.enemyList)\n                var keypressed = e.key;\n                that.socket.emit('clientKeyPressed', keypressed);\n            });\n\n            this.canvas.addEventListener('click', function(e) {\n                console.log(\"Click\")\n                const canvasRect = that.canvas.getBoundingClientRect();\n                const position = {\n                    x: e.clientX - canvasRect.left,\n                    y: e.clientY - canvasRect.top \n                } \n                that.socket.emit('clientMouseClicked', position)\n            })\n\n        },\n        methods: {\n            render(){\n                // Não sei pra que serve mas tem que usar\n                this.context.save();\n\n                // Atualiza a posicao da camera do player\n                var playerCam = this.playerList[this.socket.id].cam;\n                this.context.translate(-playerCam.x, -playerCam.y);\n\n                // Desenha o background antes pra ficar atras dos players\n                this.context.drawImage(this.background, 0, 0);   \n\n\n                for( const [key, value] of Object.entries(this.playerList)){\n                    this.sprite_char.src = this.playerSprites[value.sprite];\n                    this.context.drawImage(this.sprite_char, 0, 0, 16, 16, value.position.x, value.position.y, 16, 16);   \n                }\n\n                for( const [key, value] of Object.entries(this.enemyList)){\n                    this.sprite_enemy.src = this.enemySprites[value.sprite];\n                    this.context.drawImage(this.sprite_enemy, 0, 0, 16, 16, value.position.x, value.position.y, 16, 16);   \n                }\n\n\n                // Não sei pra que serve mas tem que usar\n                this.context.restore();\n            }\n        }\n\n    }\n</script>\n\n<style scoped></style>"],"sourceRoot":""}]}