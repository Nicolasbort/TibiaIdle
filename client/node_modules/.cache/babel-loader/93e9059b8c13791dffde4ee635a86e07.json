{"remainingRequest":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js!/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue","mtime":1618789361620},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616778770263},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js","mtime":1616778770231},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616778770263},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js","mtime":1616778771303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL25pY29sYXMvRGVza3RvcC9UaWJpYUlkbGUvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NvbXBvbmVudENhbnZhcycsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRleHQ6IHt9LAogICAgICBwbGF5ZXJTcHJpdGVzOiBbcmVxdWlyZSgnLi4vYXNzZXRzL3ByaWVzdDEvdjEvcHJpZXN0MV92MV8xLnBuZycpLCByZXF1aXJlKCcuLi9hc3NldHMvcHJpZXN0Mi92MS9wcmllc3QyX3YxXzEucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9wcmllc3QzL3YxL3ByaWVzdDNfdjFfMS5wbmcnKV0sCiAgICAgIGVuZW15U3ByaXRlczogW3JlcXVpcmUoJy4uL2Fzc2V0cy9za2VsZXRvbi92MS9za2VsZXRvbjJfdjFfMS5wbmcnKSwgcmVxdWlyZSgnLi4vYXNzZXRzL3NrZWxldG9uL3YxL3NrZWxldG9uMl92MV8yLnBuZycpLCByZXF1aXJlKCcuLi9hc3NldHMvc2tlbGV0b24vdjEvc2tlbGV0b24yX3YxXzMucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9za2VsZXRvbi92MS9za2VsZXRvbjJfdjFfNC5wbmcnKV0sCiAgICAgIGJhY2tncm91bmQ6IG5ldyBJbWFnZSgpLAogICAgICBzcHJpdGVfY2hhcjogbmV3IEltYWdlKCksCiAgICAgIHNwcml0ZV9lbmVteTogbmV3IEltYWdlKCkKICAgIH07CiAgfSwKICBwcm9wczogewogICAgZ2FtZVN0YXRlOiBPYmplY3QsCiAgICBwbGF5ZXJJZDogU3RyaW5nCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5iYWNrZ3JvdW5kLnNyYyA9IHJlcXVpcmUoIi4uL2Fzc2V0cy9tYXAuanBlZyIpOwogICAgdGhpcy5zcHJpdGVfY2hhci5jbGFzc05hbWUgKz0gImNoYXJfIjsKICAgIGNvbnNvbGUubG9nKHRoaXMuYmFja2dyb3VuZCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmNhbnZhcyA9IHRoaXMuJHJlZnMuZG9tQ2FudmFzOwogICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIHZhciB0aGF0ID0gdGhpczsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBrZXlwcmVzc2VkID0gZS5rZXk7CgogICAgICBfdGhpcy4kZW1pdCgiY2xpZW50S2V5UHJlc3NlZCIsIGtleXByZXNzZWQpOwogICAgfSk7IC8vIHRoaXMucmVuZGVyKCk7CiAgICAvLyB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgIC8vICAgICBjb25zb2xlLmxvZygiQ2xpY2siKQogICAgLy8gICAgIGNvbnN0IGNhbnZhc1JlY3QgPSB0aGF0LmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIC8vICAgICBjb25zdCBwb3NpdGlvbiA9IHsKICAgIC8vICAgICAgICAgeDogZS5jbGllbnRYIC0gY2FudmFzUmVjdC5sZWZ0LAogICAgLy8gICAgICAgICB5OiBlLmNsaWVudFkgLSBjYW52YXNSZWN0LnRvcCAKICAgIC8vICAgICB9IAogICAgLy8gICAgIHRoYXQuc29ja2V0LmVtaXQoJ2NsaWVudE1vdXNlQ2xpY2tlZCcsIHBvc2l0aW9uKQogICAgLy8gfSkKCiAgICB0aGlzLmxvb3AoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICAvLyBOw6NvIHNlaSBwcmEgcXVlIHNlcnZlIG1hcyB0ZW0gcXVlIHVzYXIKICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTsgLy8gQXR1YWxpemEgYSBwb3NpY2FvIGRhIGNhbWVyYSBkbyBwbGF5ZXIKCiAgICAgIHZhciBwbGF5ZXJDYW0gPSB0aGlzLmdhbWVTdGF0ZS5wbGF5ZXJzW3RoaXMucGxheWVySWRdLmNhbTsKICAgICAgdGhpcy5jb250ZXh0LnRyYW5zbGF0ZSgtcGxheWVyQ2FtLngsIC1wbGF5ZXJDYW0ueSk7IC8vIERlc2VuaGEgbyBiYWNrZ3JvdW5kIGFudGVzIHByYSBmaWNhciBhdHJhcyBkb3MgcGxheWVycwoKICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLmJhY2tncm91bmQsIDAsIDApOwoKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGVudHJpZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLmdhbWVTdGF0ZS5wbGF5ZXJzKTsgX2kgPCBfT2JqZWN0JGVudHJpZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIF9PYmplY3QkZW50cmllcyRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllc1tfaV0sIDIpLAogICAgICAgICAgICBrZXkgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sCiAgICAgICAgICAgIHBsYXllciA9IF9PYmplY3QkZW50cmllcyRfaVsxXTsKCiAgICAgICAgdGhpcy5zcHJpdGVfY2hhci5zcmMgPSB0aGlzLnBsYXllclNwcml0ZXNbcGxheWVyLnNwcml0ZV07CiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLnNwcml0ZV9jaGFyLCAwLCAwLCAxNiwgMTYsIHBsYXllci5wb3NpdGlvbi54LCBwbGF5ZXIucG9zaXRpb24ueSwgMTYsIDE2KTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgX2kyID0gMCwgX09iamVjdCRlbnRyaWVzMiA9IE9iamVjdC5lbnRyaWVzKHRoaXMuZ2FtZVN0YXRlLmVuZW1pZXMpOyBfaTIgPCBfT2JqZWN0JGVudHJpZXMyLmxlbmd0aDsgX2kyKyspIHsKICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzMiRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllczJbX2kyXSwgMiksCiAgICAgICAgICAgIF9rZXkgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzBdLAogICAgICAgICAgICBlbmVteSA9IF9PYmplY3QkZW50cmllczIkX2lbMV07CgogICAgICAgIHRoaXMuc3ByaXRlX2VuZW15LnNyYyA9IHRoaXMuZW5lbXlTcHJpdGVzW2VuZW15LnNwcml0ZV07CiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLnNwcml0ZV9lbmVteSwgMCwgMCwgMTYsIDE2LCBlbmVteS5wb3NpdGlvbi54LCBlbmVteS5wb3NpdGlvbi55LCAxNiwgMTYpOwogICAgICB9IC8vIE7Do28gc2VpIHByYSBxdWUgc2VydmUgbWFzIHRlbSBxdWUgdXNhcgoKCiAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7CiAgICB9LAogICAgbG9vcDogZnVuY3Rpb24gbG9vcCgpIHsKICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgc2V0VGltZW91dCh0aGlzLmxvb3AsIDMzKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <canvas ref=\"domCanvas\" width=\"320\" height=\"320\" style=\"transform:scale(2);margin-top:150px;image-rendering: pixelated;\">\n        Canvas not supported\n    </canvas>\n</template>\n\n<script>\n\n    export default {\n        name: 'ComponentCanvas',\n\n        data (){\n            return {\n                context: {},\n\n                playerSprites: [\n                    require('../assets/priest1/v1/priest1_v1_1.png'),\n                    require('../assets/priest2/v1/priest2_v1_1.png'),\n                    require('../assets/priest3/v1/priest3_v1_1.png'),\n                ],\n                enemySprites: [\n                    require('../assets/skeleton/v1/skeleton2_v1_1.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_2.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_3.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_4.png'),\n                ],\n                background: new Image(),                \n                sprite_char: new Image(),\n                sprite_enemy: new Image(),\n            }\n        },\n\n        props: {\n            gameState: Object,\n            playerId: String\n        },\n\n        created() {\n            this.background.src = require(\"../assets/map.jpeg\");\n            this.sprite_char.className += \"char_\"\n\n            console.log(this.background)\n        },\n\n        mounted() {\n            this.canvas = this.$refs.domCanvas;\n            this.context = this.canvas.getContext('2d');\n\n            var that = this;\n\n            window.addEventListener('keypress', e => {\n                var keypressed = e.key;\n                this.$emit(\"clientKeyPressed\", keypressed);\n            });\n\n            // this.render();\n\n            // this.canvas.addEventListener('click', function(e) {\n            //     console.log(\"Click\")\n            //     const canvasRect = that.canvas.getBoundingClientRect();\n            //     const position = {\n            //         x: e.clientX - canvasRect.left,\n            //         y: e.clientY - canvasRect.top \n            //     } \n            //     that.socket.emit('clientMouseClicked', position)\n            // })\n\n            this.loop();\n        },\n        methods: {\n            render(){\n                // Não sei pra que serve mas tem que usar\n                this.context.save();\n\n                // Atualiza a posicao da camera do player\n                var playerCam = this.gameState.players[this.playerId].cam;\n                this.context.translate(-playerCam.x, -playerCam.y);\n\n                // Desenha o background antes pra ficar atras dos players\n                this.context.drawImage(this.background, 0, 0);   \n\n                for( const [key, player] of Object.entries(this.gameState.players)){\n                    this.sprite_char.src = this.playerSprites[player.sprite];\n                    this.context.drawImage(this.sprite_char, 0, 0, 16, 16, player.position.x, player.position.y, 16, 16);   \n                }\n\n                for( const [key, enemy] of Object.entries(this.gameState.enemies)){\n                    this.sprite_enemy.src = this.enemySprites[enemy.sprite];\n                    this.context.drawImage(this.sprite_enemy, 0, 0, 16, 16, enemy.position.x, enemy.position.y, 16, 16);   \n                }\n\n                // Não sei pra que serve mas tem que usar\n                this.context.restore();\n            },\n\n            loop() {\n                this.render();\n                setTimeout(this.loop, 33);\n            },\n        }\n\n    }\n</script>\n\n<style scoped>\n\n.char_ {\n    width: 50px;\n}\n\n</style>"],"sourceRoot":""}]}