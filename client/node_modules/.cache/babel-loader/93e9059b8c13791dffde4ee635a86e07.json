{"remainingRequest":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js!/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue","mtime":1616711080733},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616706506688},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js","mtime":1616706506660},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616706506688},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js","mtime":1616706507556}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL25pY29sYXMvRGVza3RvcC9UaWJpYUlkbGUvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgaW8gZnJvbSAic29ja2V0LmlvLWNsaWVudCI7CmltcG9ydCB7IEVudGl0eSwgRW50aXR5TGlzdERpY3QgfSBmcm9tICIuLi9zY3JpcHRzL0VudGl0eS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29tcG9uZW50Q2FudmFzJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc29ja2V0OiB7fSwKICAgICAgY29udGV4dDoge30sCiAgICAgIHBsYXllckxpc3Q6IFtdLAogICAgICBwbGF5ZXJTcHJpdGVzOiBbcmVxdWlyZSgnLi4vYXNzZXRzL3ByaWVzdDEvdjEvcHJpZXN0MV92MV8xLnBuZycpLCByZXF1aXJlKCcuLi9hc3NldHMvcHJpZXN0Mi92MS9wcmllc3QyX3YxXzEucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9wcmllc3QzL3YxL3ByaWVzdDNfdjFfMS5wbmcnKV0sCiAgICAgIGVuZW15U3ByaXRlczogW3JlcXVpcmUoJy4uL2Fzc2V0cy9za2VsZXRvbi92MS9za2VsZXRvbjJfdjFfMS5wbmcnKSwgcmVxdWlyZSgnLi4vYXNzZXRzL3NrZWxldG9uL3YxL3NrZWxldG9uMl92MV8yLnBuZycpLCByZXF1aXJlKCcuLi9hc3NldHMvc2tlbGV0b24vdjEvc2tlbGV0b24yX3YxXzMucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9za2VsZXRvbi92MS9za2VsZXRvbjJfdjFfNC5wbmcnKV0sCiAgICAgIGJhY2tncm91bmQ6IG5ldyBJbWFnZSgpCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuc29ja2V0ID0gaW8oImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCIsIHsKICAgICAgdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnXQogICAgfSk7CiAgICB0aGlzLmJhY2tncm91bmQuc3JjID0gcmVxdWlyZSgiLi4vYXNzZXRzL21hcC5qcGVnIik7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5jb250ZXh0ID0gdGhpcy4kcmVmcy5kb21DYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIHZhciB0aGF0ID0gdGhpczsKICAgIHRoaXMuc29ja2V0Lm9uKCJzZXJ2ZXJVcGRhdGUiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICBpZiAoInBsYXllckxpc3QiIGluIGRhdGEpIHsKICAgICAgICB0aGF0LnBsYXllckxpc3QgPSBkYXRhLnBsYXllckxpc3Q7CiAgICAgIH0KCiAgICAgIGlmICgiZW5lbXlMaXN0IiBpbiBkYXRhKSB7CiAgICAgICAgdGhhdC5lbmVteUxpc3QgPSBkYXRhLmVuZW15TGlzdDsKICAgICAgfSAvLyBjb25zb2xlLmxvZyhkYXRhKTsKCgogICAgICB0aGF0LnJlbmRlcigpOwogICAgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkgewogICAgICBjb25zb2xlLmxvZyh0aGF0LmVuZW15TGlzdCk7CiAgICAgIHZhciBrZXlwcmVzc2VkID0gZS5rZXk7CiAgICAgIHRoYXQuc29ja2V0LmVtaXQoJ2NsaWVudEtleVByZXNzZWQnLCBrZXlwcmVzc2VkKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIC8vIE7Do28gc2VpIHByYSBxdWUgc2VydmUgbWFzIHRlbSBxdWUgdXNhcgogICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpOyAvLyBBdHVhbGl6YSBhIHBvc2ljYW8gZGEgY2FtZXJhIGRvIHBsYXllcgoKICAgICAgdmFyIHBsYXllckNhbSA9IHRoaXMucGxheWVyTGlzdFt0aGlzLnNvY2tldC5pZF0uY2FtOwogICAgICB0aGlzLmNvbnRleHQudHJhbnNsYXRlKC1wbGF5ZXJDYW0ueCwgLXBsYXllckNhbS55KTsgLy8gRGVzZW5oYSBvIGJhY2tncm91bmQgYW50ZXMgcHJhIGZpY2FyIGF0cmFzIGRvcyBwbGF5ZXJzCgogICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuYmFja2dyb3VuZCwgMCwgMCk7CiAgICAgIHZhciBzcHJpdGVfY2hhciA9IG5ldyBJbWFnZSgpOwogICAgICB2YXIgc3ByaXRlX2VuZW15ID0gbmV3IEltYWdlKCk7CgogICAgICBmb3IgKHZhciBfaSA9IDAsIF9PYmplY3QkZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMucGxheWVyTGlzdCk7IF9pIDwgX09iamVjdCRlbnRyaWVzLmxlbmd0aDsgX2krKykgewogICAgICAgIHZhciBfT2JqZWN0JGVudHJpZXMkX2kgPSBfc2xpY2VkVG9BcnJheShfT2JqZWN0JGVudHJpZXNbX2ldLCAyKSwKICAgICAgICAgICAga2V5ID0gX09iamVjdCRlbnRyaWVzJF9pWzBdLAogICAgICAgICAgICB2YWx1ZSA9IF9PYmplY3QkZW50cmllcyRfaVsxXTsKCiAgICAgICAgLy8gY29uc29sZS5sb2codmFsdWUpCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wbGF5ZXJTcHJpdGVzW3ZhbHVlLnNwcml0ZV0pCiAgICAgICAgc3ByaXRlX2NoYXIuc3JjID0gdGhpcy5wbGF5ZXJTcHJpdGVzW3ZhbHVlLnNwcml0ZV07CiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShzcHJpdGVfY2hhciwgMCwgMCwgMTYsIDE2LCB2YWx1ZS5wb3NpdGlvbi54LCB2YWx1ZS5wb3NpdGlvbi55LCAxNiwgMTYpOwogICAgICB9CgogICAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGVudHJpZXMyID0gT2JqZWN0LmVudHJpZXModGhpcy5lbmVteUxpc3QpOyBfaTIgPCBfT2JqZWN0JGVudHJpZXMyLmxlbmd0aDsgX2kyKyspIHsKICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzMiRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllczJbX2kyXSwgMiksCiAgICAgICAgICAgIF9rZXkgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzBdLAogICAgICAgICAgICBfdmFsdWUgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzFdOwoKICAgICAgICBzcHJpdGVfZW5lbXkuc3JjID0gdGhpcy5lbmVteVNwcml0ZXNbX3ZhbHVlLnNwcml0ZV07CiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShzcHJpdGVfZW5lbXksIDAsIDAsIDE2LCAxNiwgX3ZhbHVlLnBvc2l0aW9uLngsIF92YWx1ZS5wb3NpdGlvbi55LCAxNiwgMTYpOwogICAgICB9IC8vIE7Do28gc2VpIHByYSBxdWUgc2VydmUgbWFzIHRlbSBxdWUgdXNhcgoKCiAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/nicolas/Desktop/TibiaIdle/client/src/components/ComponentCanvas.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <canvas ref=\"domCanvas\" width=\"320\" height=\"320\" style=\"transform:scale(2);margin-top:150px;image-rendering: pixelated;\">\n        Canvas not supported\n    </canvas>\n</template>\n\n<script>\n    import io from \"socket.io-client\"\n    import {Entity, EntityListDict} from \"../scripts/Entity.js\"\n\n    export default {\n        name: 'ComponentCanvas',\n        data (){\n            return {\n                socket: {},\n                context: {},\n\n                playerList: [],\n                playerSprites: [\n                    require('../assets/priest1/v1/priest1_v1_1.png'),\n                    require('../assets/priest2/v1/priest2_v1_1.png'),\n                    require('../assets/priest3/v1/priest3_v1_1.png'),\n                ],\n                enemySprites: [\n                    require('../assets/skeleton/v1/skeleton2_v1_1.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_2.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_3.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_4.png'),\n                ],\n                background: new Image(),\n            }\n        },\n        created() {\n            this.socket = io(\"http://localhost:3000\", {transports:['websocket']});\n            this.background.src = require(\"../assets/map.jpeg\");\n        },\n        mounted() {\n            this.context = this.$refs.domCanvas.getContext('2d');\n\n            var that = this;\n            this.socket.on(\"serverUpdate\", data => {\n                if(\"playerList\" in data){\n                    that.playerList = data.playerList;\n                }\n                if (\"enemyList\" in data){\n                    that.enemyList = data.enemyList;\n                }\n                // console.log(data);\n                that.render();\n            });\n\n            window.addEventListener('keypress', function(e){\n                console.log(that.enemyList)\n                var keypressed = e.key;\n                that.socket.emit('clientKeyPressed', keypressed);\n            });\n        },\n        methods: {\n            render(){\n                // Não sei pra que serve mas tem que usar\n                this.context.save();\n\n                // Atualiza a posicao da camera do player\n                var playerCam = this.playerList[this.socket.id].cam;\n                this.context.translate(-playerCam.x, -playerCam.y);\n\n                // Desenha o background antes pra ficar atras dos players\n                this.context.drawImage(this.background, 0, 0);   \n\n                var sprite_char = new Image();\n                var sprite_enemy = new Image();\n                for( const [key, value] of Object.entries(this.playerList)){\n                    // console.log(value)\n                    // console.log(this.playerSprites[value.sprite])\n                    sprite_char.src = this.playerSprites[value.sprite];\n                    this.context.drawImage(sprite_char, 0, 0, 16, 16, value.position.x, value.position.y, 16, 16);   \n                }\n\n                for( const [key, value] of Object.entries(this.enemyList)){\n                    sprite_enemy.src = this.enemySprites[value.sprite];\n                    this.context.drawImage(sprite_enemy, 0, 0, 16, 16, value.position.x, value.position.y, 16, 16);   \n                }\n\n\n                // Não sei pra que serve mas tem que usar\n                this.context.restore();\n            }\n        }\n\n    }\n</script>\n\n<style scoped></style>"],"sourceRoot":""}]}