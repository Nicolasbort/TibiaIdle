{"remainingRequest":"/home/nicolas/Desktop/T_iagoibiaIdle/client/node_modules/babel-loader/lib/index.js!/home/nicolas/Desktop/T_iagoibiaIdle/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nicolas/Desktop/T_iagoibiaIdle/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nicolas/Desktop/T_iagoibiaIdle/client/src/components/ComponentCanvas.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/nicolas/Desktop/T_iagoibiaIdle/client/src/components/ComponentCanvas.vue","mtime":1616685703000},{"path":"/home/nicolas/Desktop/T_iagoibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616639965000},{"path":"/home/nicolas/Desktop/T_iagoibiaIdle/client/node_modules/babel-loader/lib/index.js","mtime":1616639965000},{"path":"/home/nicolas/Desktop/T_iagoibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616639965000},{"path":"/home/nicolas/Desktop/T_iagoibiaIdle/client/node_modules/vue-loader-v16/dist/index.js","mtime":1616639967000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL25pY29sYXMvRGVza3RvcC9UX2lhZ29pYmlhSWRsZS9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCBpbyBmcm9tICJzb2NrZXQuaW8tY2xpZW50IjsKaW1wb3J0IHsgRW50aXR5LCBFbnRpdHlMaXN0RGljdCB9IGZyb20gIi4uL3NjcmlwdHMvRW50aXR5LmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb21wb25lbnRDYW52YXMnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzb2NrZXQ6IHt9LAogICAgICBjb250ZXh0OiB7fSwKICAgICAgcGxheWVyTGlzdDogW10sCiAgICAgIHBsYXllclNwcml0ZXM6IFtyZXF1aXJlKCcuLi9hc3NldHMvcHJpZXN0MS92MS9wcmllc3QxX3YxXzEucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9wcmllc3QyL3YxL3ByaWVzdDJfdjFfMS5wbmcnKSwgcmVxdWlyZSgnLi4vYXNzZXRzL3ByaWVzdDMvdjEvcHJpZXN0M192MV8xLnBuZycpXSwKICAgICAgYmFja2dyb3VuZDogbmV3IEltYWdlKCkKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zb2NrZXQgPSBpbygiaHR0cDovL2xvY2FsaG9zdDozMDAwIiwgewogICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCddCiAgICB9KTsKICAgIHRoaXMuYmFja2dyb3VuZC5zcmMgPSByZXF1aXJlKCIuLi9hc3NldHMvbWFwLmpwZWciKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLiRyZWZzLmRvbUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgdmFyIHRoYXQgPSB0aGlzOwogICAgdGhpcy5zb2NrZXQub24oInNlcnZlclVwZGF0ZSIsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGlmICgicGxheWVyTGlzdCIgaW4gZGF0YSkgewogICAgICAgIHRoYXQucGxheWVyTGlzdCA9IGRhdGEucGxheWVyTGlzdDsKICAgICAgfQoKICAgICAgdGhhdC5yZW5kZXIoKTsKICAgIH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIGtleXByZXNzZWQgPSBlLmtleTsKICAgICAgdGhhdC5zb2NrZXQuZW1pdCgnY2xpZW50S2V5UHJlc3NlZCcsIGtleXByZXNzZWQpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgLy8gTsOjbyBzZWkgcHJhIHF1ZSBzZXJ2ZSBtYXMgdGVtIHF1ZSB1c2FyCiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7IC8vIEF0dWFsaXphIGEgcG9zaWNhbyBkYSBjYW1lcmEgZG8gcGxheWVyCgogICAgICB2YXIgcGxheWVyQ2FtID0gdGhpcy5wbGF5ZXJMaXN0W3RoaXMuc29ja2V0LmlkXS5jYW07CiAgICAgIHRoaXMuY29udGV4dC50cmFuc2xhdGUoLXBsYXllckNhbS54LCAtcGxheWVyQ2FtLnkpOyAvLyBEZXNlbmhhIG8gYmFja2dyb3VuZCBhbnRlcyBwcmEgZmljYXIgYXRyYXMgZG9zIHBsYXllcnMKCiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5iYWNrZ3JvdW5kLCAwLCAwKTsKICAgICAgdmFyIHNwcml0ZV9jaGFyID0gbmV3IEltYWdlKCk7CgogICAgICBmb3IgKHZhciBfaSA9IDAsIF9PYmplY3QkZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMucGxheWVyTGlzdCk7IF9pIDwgX09iamVjdCRlbnRyaWVzLmxlbmd0aDsgX2krKykgewogICAgICAgIHZhciBfT2JqZWN0JGVudHJpZXMkX2kgPSBfc2xpY2VkVG9BcnJheShfT2JqZWN0JGVudHJpZXNbX2ldLCAyKSwKICAgICAgICAgICAga2V5ID0gX09iamVjdCRlbnRyaWVzJF9pWzBdLAogICAgICAgICAgICB2YWx1ZSA9IF9PYmplY3QkZW50cmllcyRfaVsxXTsKCiAgICAgICAgc3ByaXRlX2NoYXIuc3JjID0gdGhpcy5wbGF5ZXJTcHJpdGVzW3ZhbHVlLnNwcml0ZV07CiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShzcHJpdGVfY2hhciwgMCwgMCwgMTYsIDE2LCB2YWx1ZS54LCB2YWx1ZS55LCAxNiwgMTYpOwogICAgICB9IC8vIE7Do28gc2VpIHByYSBxdWUgc2VydmUgbWFzIHRlbSBxdWUgdXNhcgoKCiAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/nicolas/Desktop/T_iagoibiaIdle/client/src/components/ComponentCanvas.vue"],"names":[],"mappings":";;AAOI,OAAO,EAAP,MAAe,kBAAf;AACA,SAAQ,MAAR,EAAgB,cAAhB,QAAqC,sBAArC;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,iBADK;AAEX,EAAA,IAFW,kBAEJ;AACH,WAAO;AACH,MAAA,MAAM,EAAE,EADL;AAEH,MAAA,OAAO,EAAE,EAFN;AAIH,MAAA,UAAU,EAAE,EAJT;AAKH,MAAA,aAAa,EAAE,CACX,OAAO,CAAC,uCAAD,CADI,EAEX,OAAO,CAAC,uCAAD,CAFI,EAGX,OAAO,CAAC,uCAAD,CAHI,CALZ;AAUH,MAAA,UAAU,EAAE,IAAI,KAAJ;AAVT,KAAP;AAYH,GAfU;AAgBX,EAAA,OAhBW,qBAgBD;AACN,SAAK,MAAL,GAAc,EAAE,CAAC,uBAAD,EAA0B;AAAC,MAAA,UAAU,EAAC,CAAC,WAAD;AAAZ,KAA1B,CAAhB;AACA,SAAK,UAAL,CAAgB,GAAhB,GAAsB,OAAO,CAAC,oBAAD,CAA7B;AACH,GAnBU;AAoBX,EAAA,OApBW,qBAoBD;AACN,SAAK,OAAL,GAAe,KAAK,KAAL,CAAW,SAAX,CAAqB,UAArB,CAAgC,IAAhC,CAAf;AAEA,QAAI,IAAG,GAAI,IAAX;AACA,SAAK,MAAL,CAAY,EAAZ,CAAe,cAAf,EAA+B,UAAA,IAAG,EAAK;AACnC,UAAG,gBAAgB,IAAnB,EAAwB;AACpB,QAAA,IAAI,CAAC,UAAL,GAAkB,IAAI,CAAC,UAAvB;AACJ;;AACA,MAAA,IAAI,CAAC,MAAL;AACH,KALD;AAOA,IAAA,MAAM,CAAC,gBAAP,CAAwB,UAAxB,EAAoC,UAAS,CAAT,EAAW;AAC3C,UAAI,UAAS,GAAI,CAAC,CAAC,GAAnB;AACA,MAAA,IAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,kBAAjB,EAAqC,UAArC;AACH,KAHD;AAIH,GAnCU;AAoCX,EAAA,OAAO,EAAE;AACL,IAAA,MADK,oBACG;AACJ;AACA,WAAK,OAAL,CAAa,IAAb,GAFI,CAIJ;;AACA,UAAI,SAAQ,GAAI,KAAK,UAAL,CAAgB,KAAK,MAAL,CAAY,EAA5B,EAAgC,GAAhD;AACA,WAAK,OAAL,CAAa,SAAb,CAAuB,CAAC,SAAS,CAAC,CAAlC,EAAqC,CAAC,SAAS,CAAC,CAAhD,EANI,CAQJ;;AACA,WAAK,OAAL,CAAa,SAAb,CAAuB,KAAK,UAA5B,EAAwC,CAAxC,EAA2C,CAA3C;AAEA,UAAI,WAAU,GAAI,IAAI,KAAJ,EAAlB;;AACA,yCAA2B,MAAM,CAAC,OAAP,CAAe,KAAK,UAApB,CAA3B,qCAA2D;AAAA;AAAA,YAA/C,GAA+C;AAAA,YAA1C,KAA0C;;AACvD,QAAA,WAAW,CAAC,GAAZ,GAAkB,KAAK,aAAL,CAAmB,KAAK,CAAC,MAAzB,CAAlB;AACA,aAAK,OAAL,CAAa,SAAb,CAAuB,WAAvB,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,EAA1C,EAA8C,EAA9C,EAAkD,KAAK,CAAC,CAAxD,EAA2D,KAAK,CAAC,CAAjE,EAAoE,EAApE,EAAwE,EAAxE;AACJ,OAfI,CAiBJ;;;AACA,WAAK,OAAL,CAAa,OAAb;AACJ;AApBK;AApCE,CAAf","sourcesContent":["<template>\n    <canvas ref=\"domCanvas\" width=\"320\" height=\"320\" style=\"transform:scale(2);margin-top:150px;image-rendering: pixelated;\">\n        Canvas not supported\n    </canvas>\n</template>\n\n<script>\n    import io from \"socket.io-client\"\n    import {Entity, EntityListDict} from \"../scripts/Entity.js\"\n\n    export default {\n        name: 'ComponentCanvas',\n        data (){\n            return {\n                socket: {},\n                context: {},\n\n                playerList: [],\n                playerSprites: [\n                    require('../assets/priest1/v1/priest1_v1_1.png'),\n                    require('../assets/priest2/v1/priest2_v1_1.png'),\n                    require('../assets/priest3/v1/priest3_v1_1.png'),\n                ],\n                background: new Image()\n            }\n        },\n        created() {\n            this.socket = io(\"http://localhost:3000\", {transports:['websocket']});\n            this.background.src = require(\"../assets/map.jpeg\");\n        },\n        mounted() {\n            this.context = this.$refs.domCanvas.getContext('2d');\n\n            var that = this;\n            this.socket.on(\"serverUpdate\", data => {\n                if(\"playerList\" in data){\n                    that.playerList = data.playerList;\n                }\n                that.render();\n            });\n\n            window.addEventListener('keypress', function(e){\n                var keypressed = e.key;\n                that.socket.emit('clientKeyPressed', keypressed);\n            });\n        },\n        methods: {\n            render(){\n                // Não sei pra que serve mas tem que usar\n                this.context.save();\n\n                // Atualiza a posicao da camera do player\n                var playerCam = this.playerList[this.socket.id].cam;\n                this.context.translate(-playerCam.x, -playerCam.y);\n\n                // Desenha o background antes pra ficar atras dos players\n                this.context.drawImage(this.background, 0, 0);   \n\n                var sprite_char = new Image();\n                for( const [key, value] of Object.entries(this.playerList)){\n                    sprite_char.src = this.playerSprites[value.sprite];\n                    this.context.drawImage(sprite_char, 0, 0, 16, 16, value.x, value.y, 16, 16);   \n                }\n\n                // Não sei pra que serve mas tem que usar\n                this.context.restore();\n            }\n        }\n\n    }\n</script>\n\n<style scoped></style>"],"sourceRoot":""}]}