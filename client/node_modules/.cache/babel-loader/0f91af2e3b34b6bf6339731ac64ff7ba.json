{"remainingRequest":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js!/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nicolas/Desktop/TibiaIdle/client/src/components/Canvas.vue?vue&type=template&id=4336af88&scoped=true","dependencies":[{"path":"/home/nicolas/Desktop/TibiaIdle/client/src/components/Canvas.vue","mtime":1618791111801},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616778770263},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js","mtime":1616778770231},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1616778771303},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616778770263},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js","mtime":1616778771303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhJZCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoImRhdGEtdi00MzM2YWY4OCIpOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtNDMzNmFmODgiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAicm93Igp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogImNvbC0xMiBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciIKfTsKdmFyIF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJpbWctZmx1aWQiLAogIHJlZjogImRvbUNhbnZhcyIsCiAgd2lkdGg6ICIzMjAiLAogIGhlaWdodDogIjMyMCIsCiAgc3R5bGU6IHsKICAgICJ0cmFuc2Zvcm0iOiAic2NhbGUoMSkiLAogICAgImltYWdlLXJlbmRlcmluZyI6ICJwaXhlbGF0ZWQiCiAgfQp9OwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCB2YXIgcmVuZGVyID0gLyojX19QVVJFX18qL193aXRoSWQoZnVuY3Rpb24gKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZSgiY2FudmFzIiwgX2hvaXN0ZWRfMywgIiBDYW52YXMgbm90IHN1cHBvcnRlZCAiLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKV0pXSk7Cn0pOw=="},{"version":3,"sources":["/home/nicolas/Desktop/TibiaIdle/client/src/components/Canvas.vue"],"names":[],"mappings":";;;;;;;AACS,EAAA,KAAK,EAAC;;;AACF,EAAA,KAAK,EAAC;;;AACC,EAAA,KAAK,EAAC,W;AAAY,EAAA,GAAG,EAAC,W;AAAY,EAAA,KAAK,EAAC,K;AAAM,EAAA,MAAM,EAAC,K;AAAM,EAAA,KAAsD,EAAtD;AAAA,iBAAA,UAAA;AAAA,uBAAA;AAAA;;;;;;uBAF3E,YAAA,CAMM,KANN,EAAA,UAAA,EAMM,CALF,YAAA,CAIM,KAJN,EAAA,UAAA,EAIM,CAHF,YAAA,CAES,QAFT,EAAA,UAAA,EAA0H,wBAA1H,EAEA;AAAA;AAFA,GAGE,CAJN,CAKE,CANN,C","sourcesContent":["<template>\n    <div class=\"row\">\n        <div class=\"col-12 d-flex justify-content-center\">\n            <canvas class=\"img-fluid\" ref=\"domCanvas\" width=\"320\" height=\"320\" style=\"transform:scale(1);image-rendering: pixelated;\">\n                Canvas not supported\n            </canvas>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    export default {\n        name: 'Canvas',\n\n        data (){\n            return {\n                context: {},\n\n                playerSprites: [\n                    require('../assets/priest1/v1/priest1_v1_1.png'),\n                    require('../assets/priest2/v1/priest2_v1_1.png'),\n                    require('../assets/priest3/v1/priest3_v1_1.png'),\n                ],\n                enemySprites: [\n                    require('../assets/skeleton/v1/skeleton2_v1_1.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_2.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_3.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_4.png'),\n                ],\n                background: new Image(),                \n                sprite_char: new Image(),\n                sprite_enemy: new Image(),\n            }\n        },\n\n        props: {\n            gameState: Object,\n            playerId: String\n        },\n\n        created() {\n            this.background.src = require(\"../assets/map.jpeg\");\n            this.sprite_char.className += \"char_\"\n\n            console.log(this.background)\n        },\n\n        mounted() {\n            this.canvas = this.$refs.domCanvas;\n            this.context = this.canvas.getContext('2d');\n\n            var that = this;\n\n            window.addEventListener('keypress', e => {\n                let keypressed = e.key;\n                this.$emit(\"clientKeyPressed\", keypressed);\n            });\n\n            // this.canvas.addEventListener('click', function(e) {\n            //     console.log(\"Click\")\n            //     const canvasRect = that.canvas.getBoundingClientRect();\n            //     const position = {\n            //         x: e.clientX - canvasRect.left,\n            //         y: e.clientY - canvasRect.top \n            //     } \n            //     that.socket.emit('clientMouseClicked', position)\n            // })\n\n            this.loop();\n        },\n        methods: {\n            render(){\n                // Não sei pra que serve mas tem que usar\n                this.context.save();\n\n                // Atualiza a posicao da camera do player\n                var playerCam = this.gameState.players[this.playerId].cam;\n                this.context.translate(-playerCam.x, -playerCam.y);\n\n                // Desenha o background antes pra ficar atras dos players\n                this.context.drawImage(this.background, 0, 0);   \n\n                for( const [key, player] of Object.entries(this.gameState.players)){\n                    this.sprite_char.src = this.playerSprites[player.sprite];\n                    this.context.drawImage(this.sprite_char, 0, 0, 16, 16, player.position.x, player.position.y, 16, 16);   \n                }\n\n                for( const [key, enemy] of Object.entries(this.gameState.enemies)){\n                    this.sprite_enemy.src = this.enemySprites[enemy.sprite];\n                    this.context.drawImage(this.sprite_enemy, 0, 0, 16, 16, enemy.position.x, enemy.position.y, 16, 16);   \n                }\n\n                // Não sei pra que serve mas tem que usar\n                this.context.restore();\n            },\n\n            loop() {\n                this.render();\n                setTimeout(this.loop, 33);\n            },\n        }\n\n    }\n</script>\n\n<style scoped>\n\n.char_ {\n    width: 50px;\n}\n\n</style>"],"sourceRoot":""}]}