{"remainingRequest":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js!/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nicolas/Desktop/TibiaIdle/client/src/components/Canvas.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/nicolas/Desktop/TibiaIdle/client/src/components/Canvas.vue","mtime":1618791111801},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616778770263},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/babel-loader/lib/index.js","mtime":1616778770231},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/cache-loader/dist/cjs.js","mtime":1616778770263},{"path":"/home/nicolas/Desktop/TibiaIdle/client/node_modules/vue-loader-v16/dist/index.js","mtime":1616778771303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL25pY29sYXMvRGVza3RvcC9UaWJpYUlkbGUvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NhbnZhcycsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRleHQ6IHt9LAogICAgICBwbGF5ZXJTcHJpdGVzOiBbcmVxdWlyZSgnLi4vYXNzZXRzL3ByaWVzdDEvdjEvcHJpZXN0MV92MV8xLnBuZycpLCByZXF1aXJlKCcuLi9hc3NldHMvcHJpZXN0Mi92MS9wcmllc3QyX3YxXzEucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9wcmllc3QzL3YxL3ByaWVzdDNfdjFfMS5wbmcnKV0sCiAgICAgIGVuZW15U3ByaXRlczogW3JlcXVpcmUoJy4uL2Fzc2V0cy9za2VsZXRvbi92MS9za2VsZXRvbjJfdjFfMS5wbmcnKSwgcmVxdWlyZSgnLi4vYXNzZXRzL3NrZWxldG9uL3YxL3NrZWxldG9uMl92MV8yLnBuZycpLCByZXF1aXJlKCcuLi9hc3NldHMvc2tlbGV0b24vdjEvc2tlbGV0b24yX3YxXzMucG5nJyksIHJlcXVpcmUoJy4uL2Fzc2V0cy9za2VsZXRvbi92MS9za2VsZXRvbjJfdjFfNC5wbmcnKV0sCiAgICAgIGJhY2tncm91bmQ6IG5ldyBJbWFnZSgpLAogICAgICBzcHJpdGVfY2hhcjogbmV3IEltYWdlKCksCiAgICAgIHNwcml0ZV9lbmVteTogbmV3IEltYWdlKCkKICAgIH07CiAgfSwKICBwcm9wczogewogICAgZ2FtZVN0YXRlOiBPYmplY3QsCiAgICBwbGF5ZXJJZDogU3RyaW5nCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5iYWNrZ3JvdW5kLnNyYyA9IHJlcXVpcmUoIi4uL2Fzc2V0cy9tYXAuanBlZyIpOwogICAgdGhpcy5zcHJpdGVfY2hhci5jbGFzc05hbWUgKz0gImNoYXJfIjsKICAgIGNvbnNvbGUubG9nKHRoaXMuYmFja2dyb3VuZCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmNhbnZhcyA9IHRoaXMuJHJlZnMuZG9tQ2FudmFzOwogICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIHZhciB0aGF0ID0gdGhpczsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBrZXlwcmVzc2VkID0gZS5rZXk7CgogICAgICBfdGhpcy4kZW1pdCgiY2xpZW50S2V5UHJlc3NlZCIsIGtleXByZXNzZWQpOwogICAgfSk7IC8vIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCJDbGljayIpCiAgICAvLyAgICAgY29uc3QgY2FudmFzUmVjdCA9IHRoYXQuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgLy8gICAgIGNvbnN0IHBvc2l0aW9uID0gewogICAgLy8gICAgICAgICB4OiBlLmNsaWVudFggLSBjYW52YXNSZWN0LmxlZnQsCiAgICAvLyAgICAgICAgIHk6IGUuY2xpZW50WSAtIGNhbnZhc1JlY3QudG9wIAogICAgLy8gICAgIH0gCiAgICAvLyAgICAgdGhhdC5zb2NrZXQuZW1pdCgnY2xpZW50TW91c2VDbGlja2VkJywgcG9zaXRpb24pCiAgICAvLyB9KQoKICAgIHRoaXMubG9vcCgpOwogIH0sCiAgbWV0aG9kczogewogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIC8vIE7Do28gc2VpIHByYSBxdWUgc2VydmUgbWFzIHRlbSBxdWUgdXNhcgogICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpOyAvLyBBdHVhbGl6YSBhIHBvc2ljYW8gZGEgY2FtZXJhIGRvIHBsYXllcgoKICAgICAgdmFyIHBsYXllckNhbSA9IHRoaXMuZ2FtZVN0YXRlLnBsYXllcnNbdGhpcy5wbGF5ZXJJZF0uY2FtOwogICAgICB0aGlzLmNvbnRleHQudHJhbnNsYXRlKC1wbGF5ZXJDYW0ueCwgLXBsYXllckNhbS55KTsgLy8gRGVzZW5oYSBvIGJhY2tncm91bmQgYW50ZXMgcHJhIGZpY2FyIGF0cmFzIGRvcyBwbGF5ZXJzCgogICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuYmFja2dyb3VuZCwgMCwgMCk7CgogICAgICBmb3IgKHZhciBfaSA9IDAsIF9PYmplY3QkZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuZ2FtZVN0YXRlLnBsYXllcnMpOyBfaSA8IF9PYmplY3QkZW50cmllcy5sZW5ndGg7IF9pKyspIHsKICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzJF9pID0gX3NsaWNlZFRvQXJyYXkoX09iamVjdCRlbnRyaWVzW19pXSwgMiksCiAgICAgICAgICAgIGtleSA9IF9PYmplY3QkZW50cmllcyRfaVswXSwKICAgICAgICAgICAgcGxheWVyID0gX09iamVjdCRlbnRyaWVzJF9pWzFdOwoKICAgICAgICB0aGlzLnNwcml0ZV9jaGFyLnNyYyA9IHRoaXMucGxheWVyU3ByaXRlc1twbGF5ZXIuc3ByaXRlXTsKICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuc3ByaXRlX2NoYXIsIDAsIDAsIDE2LCAxNiwgcGxheWVyLnBvc2l0aW9uLngsIHBsYXllci5wb3NpdGlvbi55LCAxNiwgMTYpOwogICAgICB9CgogICAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGVudHJpZXMyID0gT2JqZWN0LmVudHJpZXModGhpcy5nYW1lU3RhdGUuZW5lbWllcyk7IF9pMiA8IF9PYmplY3QkZW50cmllczIubGVuZ3RoOyBfaTIrKykgewogICAgICAgIHZhciBfT2JqZWN0JGVudHJpZXMyJF9pID0gX3NsaWNlZFRvQXJyYXkoX09iamVjdCRlbnRyaWVzMltfaTJdLCAyKSwKICAgICAgICAgICAgX2tleSA9IF9PYmplY3QkZW50cmllczIkX2lbMF0sCiAgICAgICAgICAgIGVuZW15ID0gX09iamVjdCRlbnRyaWVzMiRfaVsxXTsKCiAgICAgICAgdGhpcy5zcHJpdGVfZW5lbXkuc3JjID0gdGhpcy5lbmVteVNwcml0ZXNbZW5lbXkuc3ByaXRlXTsKICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuc3ByaXRlX2VuZW15LCAwLCAwLCAxNiwgMTYsIGVuZW15LnBvc2l0aW9uLngsIGVuZW15LnBvc2l0aW9uLnksIDE2LCAxNik7CiAgICAgIH0gLy8gTsOjbyBzZWkgcHJhIHF1ZSBzZXJ2ZSBtYXMgdGVtIHF1ZSB1c2FyCgoKICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTsKICAgIH0sCiAgICBsb29wOiBmdW5jdGlvbiBsb29wKCkgewogICAgICB0aGlzLnJlbmRlcigpOwogICAgICBzZXRUaW1lb3V0KHRoaXMubG9vcCwgMzMpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/nicolas/Desktop/TibiaIdle/client/src/components/Canvas.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"row\">\n        <div class=\"col-12 d-flex justify-content-center\">\n            <canvas class=\"img-fluid\" ref=\"domCanvas\" width=\"320\" height=\"320\" style=\"transform:scale(1);image-rendering: pixelated;\">\n                Canvas not supported\n            </canvas>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    export default {\n        name: 'Canvas',\n\n        data (){\n            return {\n                context: {},\n\n                playerSprites: [\n                    require('../assets/priest1/v1/priest1_v1_1.png'),\n                    require('../assets/priest2/v1/priest2_v1_1.png'),\n                    require('../assets/priest3/v1/priest3_v1_1.png'),\n                ],\n                enemySprites: [\n                    require('../assets/skeleton/v1/skeleton2_v1_1.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_2.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_3.png'),\n                    require('../assets/skeleton/v1/skeleton2_v1_4.png'),\n                ],\n                background: new Image(),                \n                sprite_char: new Image(),\n                sprite_enemy: new Image(),\n            }\n        },\n\n        props: {\n            gameState: Object,\n            playerId: String\n        },\n\n        created() {\n            this.background.src = require(\"../assets/map.jpeg\");\n            this.sprite_char.className += \"char_\"\n\n            console.log(this.background)\n        },\n\n        mounted() {\n            this.canvas = this.$refs.domCanvas;\n            this.context = this.canvas.getContext('2d');\n\n            var that = this;\n\n            window.addEventListener('keypress', e => {\n                let keypressed = e.key;\n                this.$emit(\"clientKeyPressed\", keypressed);\n            });\n\n            // this.canvas.addEventListener('click', function(e) {\n            //     console.log(\"Click\")\n            //     const canvasRect = that.canvas.getBoundingClientRect();\n            //     const position = {\n            //         x: e.clientX - canvasRect.left,\n            //         y: e.clientY - canvasRect.top \n            //     } \n            //     that.socket.emit('clientMouseClicked', position)\n            // })\n\n            this.loop();\n        },\n        methods: {\n            render(){\n                // Não sei pra que serve mas tem que usar\n                this.context.save();\n\n                // Atualiza a posicao da camera do player\n                var playerCam = this.gameState.players[this.playerId].cam;\n                this.context.translate(-playerCam.x, -playerCam.y);\n\n                // Desenha o background antes pra ficar atras dos players\n                this.context.drawImage(this.background, 0, 0);   \n\n                for( const [key, player] of Object.entries(this.gameState.players)){\n                    this.sprite_char.src = this.playerSprites[player.sprite];\n                    this.context.drawImage(this.sprite_char, 0, 0, 16, 16, player.position.x, player.position.y, 16, 16);   \n                }\n\n                for( const [key, enemy] of Object.entries(this.gameState.enemies)){\n                    this.sprite_enemy.src = this.enemySprites[enemy.sprite];\n                    this.context.drawImage(this.sprite_enemy, 0, 0, 16, 16, enemy.position.x, enemy.position.y, 16, 16);   \n                }\n\n                // Não sei pra que serve mas tem que usar\n                this.context.restore();\n            },\n\n            loop() {\n                this.render();\n                setTimeout(this.loop, 33);\n            },\n        }\n\n    }\n</script>\n\n<style scoped>\n\n.char_ {\n    width: 50px;\n}\n\n</style>"],"sourceRoot":""}]}